
\NeedsTeXFormat{LaTeX2e}

\input{abakos.def}
\CVSExtract$Id: abakos.sty,v 0.1 2021/05/06 15:08:25 A L Exp $
\CVSPackage{abakos}{} %substitui \ProvidesPackage (replaces \ProvidesPackage)

% Pacotes de codificação das fontes para português
\usepackage[T1]{fontenc}
\usepackage{times}
\usepackage[
colorlinks=false,  % não pinta o texto
pdfborder={0 0 0}  % remove a borda azul dos links
]{hyperref}

% \usepackage{memhfixc}  % Para mudança de tamanho de fontes 
% Merge em duas células (linhas diferentes)
\usepackage{multirow}

%desenhar cabeçalho e rodapé
\usepackage{fancyhdr}
\pagestyle{fancy}


% Pacote para divisão silábica do portugues
\usepackage[english, brazilian]{babel}
\usepackage[titles]{tocloft} %% formatar a lista de figuras e tabelas.
\usepackage[format=hang,font=bf,justification=centerlast,labelfont=bf,labelsep=endash]{caption}
%para usar o citador
%  \usepackage{selinput}
% 
%   \SelectInputMappings{     % Semi-automatic input selection
%     atilde={ã},             % by a list of selected glyphs
%     aacute={á},             % see: http://partners.adobe.com/public/developer/en/opentype/glyphlist.txt
%     ccedilla={ç}
%   }
% \usepackage{babel}
% \usepackage{txfonts}      % Font in Times New Roman style
\usepackage[onehalfspacing]{setspace}
\usepackage{lipsum}       % Only for dummy text, to be dropped in actual document


% Pacote para citação e referências seguindo ABNT no sistema (AUTOR, Data)
\usepackage[alf,abnt-emphasize=bf,bibjustif,recuo=0cm, abnt-etal-cite=3, abnt-full-initials=no, abnt-and-type=;, abnt-thesis-year=both, abnt-etal-text=it]{abntex2cite} % faz ficar negrito i titulo e a o ano da thesi vir depois do titulo

%\usepackage[alf,abnt-emphasize=bf, abnt-etal-cite=2, abnt-full-initials=yes]{abntcite} % faz ficar negrito i titulo e a o ano da thesi vir depois do titulo

%\usepackage[alf]{abntex2cite}
% \usepackage{cite}
 %\usepackage{abnt-alf}
\usepackage{setspace}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}

\citeoption{abnt-full-initials=yes}


\usepackage[linesnumbered, ruled, vlined]{algorithm2e}
\usepackage{algorithmic} %algorithm
\usepackage{listings}

\usepackage{leading}   %espaçamento variavel
\newcommand{\esp}{\hspace{-0.3cm}} % espaço entre Numero e Título da seção

% Alterar o espaçamento da margem no algoritmo
\setlength{\algomargin}{1em}

% Margens 
% \usepackage[inner=30mm,outer=20mm,top=30mm,bottom=20mm]{geometry}
 \usepackage{geometry}
 \geometry{tmargin=20mm,bmargin=20mm,lmargin=15mm,rmargin=15mm}
 
 % -- Legenda das Figuras --
\usepackage{caption}
\captionsetup[figure]{labelsep=endash,labelfont={bf},textfont=bf} 
\captionsetup[table]{labelsep=endash,labelfont={bf},textfont=bf}
 

%%%%%%Utilizar simbolos como nota de rodapé [* 
 \long\def\symbolfootnote[#1]#2{\begingroup%
 \def\thefootnote{\fnsymbol{footnote}}\footnote[#1]{#2}\endgroup}

%%%%%%%%%% Identação de nota de rodapé %%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage[stable]{footmisc}
\renewcommand{\footnotemargin}{0pt} %identação da nota de rodapé 
\renewcommand{\footnotelayout}{\hspace{0px}}% Espaço entre simbolo do rodapé e layout texto 

% Preambulo: adicionar pacotes
\usepackage{tikz}
\usepackage[most]{tcolorbox}
\usepackage{atbegshi}
\usepackage{ifthen}
\usepackage{pgffor}

\usepackage{xstring}
\usepackage{xparse}
\usepackage{etoolbox}
\usepackage{pgffor}  % já deve estar incluso se você usou foreach antes

% Definir cor do fundo (exemplo da segunda imagem)
\definecolor{headerblue}{HTML}{1b253a} % Azul escuro
\definecolor{headergray}{HTML}{e5e6e7} % Cinza escuro


% Inicialmente, define \logoLicenca como vazio
\newcommand{\logoLicenca}{}
\newcommand{\licencaUrl}{}

% Define o comando \tipoLicenca para setar \logoLicenca corretamente
\newcommand{\tipoLicenca}[1]{%
	\ifthenelse{\equal{#1}{CC-BY}}{%
		\renewcommand{\logoLicenca}{template/licencas/cc-by.png}%
		\renewcommand{\licencaUrl}{https://creativecommons.org/licenses/by/4.0/}%
	}{}%
	\ifthenelse{\equal{#1}{CC-BY-SA}}{%
		\renewcommand{\logoLicenca}{template/licencas/cc-by-sa.png}%
		\renewcommand{\licencaUrl}{https://creativecommons.org/licenses/by-sa/4.0/}%
	}{}%
	\ifthenelse{\equal{#1}{CC-BY-NC}}{%
		\renewcommand{\logoLicenca}{template/licencas/cc-by-nc.png}%
		\renewcommand{\licencaUrl}{https://creativecommons.org/licenses/by-nc/4.0/}%
	}{}%
	\ifthenelse{\equal{#1}{CC-BY-ND}}{%
		\renewcommand{\logoLicenca}{template/licencas/cc-by-nd.png}%
		\renewcommand{\licencaUrl}{https://creativecommons.org/licenses/by-nd/4.0/}%
	}{}%
	\ifthenelse{\equal{#1}{CC-BY-NC-SA}}{%
		\renewcommand{\logoLicenca}{template/licencas/cc-by-nc-sa.png}%
		\renewcommand{\licencaUrl}{https://creativecommons.org/licenses/by-nc-sa/4.0/}%
	}{}%
	\ifthenelse{\equal{#1}{CC-BY-NC-ND}}{%
		\renewcommand{\logoLicenca}{template/licencas/cc-by-nc-nd.png}%
		\renewcommand{\licencaUrl}{https://creativecommons.org/licenses/by-nc-nd/4.0/}%
	}{}%
}

% Logo da revista
\newcommand{\logoRevista}{}
\newcommand{\checkForUpdatesUrl}{}

\newcommand{\setLogoRevista}[1]{\renewcommand{\logoRevista}{#1}}
\newcommand{\setCheckForUpdatesUrl}[1]{\renewcommand{\checkForUpdatesUrl}{#1}}

\newcommand{\iconOrcid}{\includegraphics[height=1em]{template/orcid.png}}

%%%%%%%%%%%%%%%

\newcommand{\afiliacao}[2]{% id, texto
	\expandafter\gdef\csname afil#1\endcsname{#2}
}

\newcommand{\autoresLista}{} % inicializa
\newcommand{\autor}[3]{% nome, id_afil, orcid
	\gappto{\autoresLista}{#1/#2/#3,}
}

\newcommand{\emailCorrespondencia}[1]{%
	\gdef\emailAutorResponsavel{#1}
}

\newcommand{\renderAutores}{%
	\begingroup
	\renewcommand{\arraystretch}{1.2}
	\newcounter{numautor}
	\newcommand{\virgula}{}%
	
	% Primeira linha - nomes com sobrescrito e ORCID
	\foreach \autorEntry in \autoresLista {%
		\ifx\autorEntry\empty\else
		\StrBefore{\autorEntry}{/}[\nome]%
		\StrBehind{\autorEntry}{/}[\restoA]%
		\StrBefore{\restoA}{/}[\idafil]%
		\StrBehind{\restoA}{/}[\orcid]%
		
		\textbf{\nome}$^{\idafil}$\ \href{\orcid}{\iconOrcid}\par
		\fi
	}
	
	\vspace{1em}
	
	% Afiliações
	\foreach \autorEntry in \autoresLista {%
		\ifx\autorEntry\empty\else
		\StrBefore{\autorEntry}{/}[\nome]%
		\StrBehind{\autorEntry}{/}[\restoA]%
		\StrBefore{\restoA}{/}[\idafil]%
		\expandafter\ifx\csname usedafil\idafil\endcsname\relax
		$^{\idafil}$ \csname afil\idafil\endcsname\par
		\expandafter\gdef\csname usedafil\idafil\endcsname{1}%
		\fi
		\fi
	}
	\endgroup
}

%%%%%%%%%%%%%%%

\newcommand{\revistaheader}{
\noindent
\thispagestyle{empty}
\begin{minipage}[t][\textheight][t]{0.72\textwidth}
	% Bloco da direita (ex: título, autores, etc.)
	\parbox[c][\textheight][c]{\linewidth}{
			\centering
			\begin{tcolorbox}[
				colback=white,
				colframe=white,
				boxrule=0pt,
				arc=0pt,
				left=10pt,
				right=10pt,
				width=13.2cm,       
				height=28cm
				]
				\begin{minipage}[t]{0.75\linewidth}
					\includegraphics[width=\linewidth]{\logoRevista}
				\end{minipage}%
				\hfill
				\begin{minipage}[t]{0.22\linewidth}
					\vspace*{-4.4cm} % ajuste fino: esse valor depende da altura da logo
					\href{\checkForUpdatesUrl}{%
						\includegraphics[width=\linewidth]{figuras/botao-check.png}
					}
				\end{minipage}
				
				\vspace{1cm} % espaçamento abaixo das logos
				
				% Título principal
				{\Large\bfseries \monog}\\[0.5em]
				
				% Título em outros idiomas
				\ifdefined\monogIngles
					\monogIngles\\[0.5em]
				\fi
				\ifdefined\monogEspanhol
					\monogEspanhol\\[1em]
				\fi
				\vspace{0.5em}
				\renderAutores
				\begin{flushright}
					\footnotesize
					\textbf{Correspondência para:} \emailAutorResponsavel
				\end{flushright}
				
				\ifdefined\resumoEN
					\vspace{2em}
					\resumoPT\\[0.3em]
					\noindent Palavras-chave: \keywordsPT
				\fi
				
				\ifdefined\resumoEN
					\vspace{2em}
					\resumoEN\\[0.3em]
					\noindent Keywords: \keywordsEN
				\fi
				
				\ifdefined\resumoES
					\vspace{2em}
					\resumoES\\[0.3em]
					\noindent Palabras clave: \keywordsES
				\fi
				
				\vfill
				\begin{flushleft}
					\scriptsize
					\textbf{Como citar:} \comoCitar
				\end{flushleft}
				
			\end{tcolorbox}		
	}
\end{minipage}
\hfill
\begin{minipage}[t][\textheight][t]{0.46\textwidth}
	% Bloco da esquerda (ex: barra lateral)
	\parbox[c][\textheight][c]{\linewidth}{
			\centering
				\begin{tcolorbox}[
				colback=headergray,
				colframe=headergray,
				boxrule=0pt,
				arc=0pt,
				left=10pt,
				right=10pt,
				width=6cm,         % largura da barra lateral
				height=32cm,       % altura da página (ajuste conforme margens)
				valign=center,
				enlarge left by=-1.5cm, % empurra para fora da margem esquerda
				enlarge top by=-2.5cm,  % sobe para cobrir da margem superior
				nobeforeafter
				]
				\vspace{1cm}
				\textbf{\MakeUppercase{\secaoNome}} \\
				\textbf{Editor responsável pelo artigo: }\editorNome \\[0.5em]
				
				\textbf{Recebido em} \\
				\dataRecebido \\
				\textbf{Aprovado em} \\
				\dataAprovado \\
				\textbf{Publicado em} \\
				\dataPublicado \\[0.5em]
				
				\textbf{PID} \\
				\pidArtigo \\
				
				\href{\licencaUrl}{%
					\includegraphics[width=3cm]{\logoLicenca} \\[1em]
				}
				
				\textbf{Texto padrão da Licença} \\
				\textoLicenca \\
				
				\textbf{Declaração de Copyright} \\
				\textoCopyright \\
				
				\textbf{Contribuição dos autores segundo a Taxonomia CRediT} \\
				\textoCRediT \\
				
				\vspace{2cm}
				\textbf{Conflito de interesses} \\
				\textoConflito \\
				
				\textbf{Fonte de financiamento} \\
				\textoFinanciamento
			\end{tcolorbox}
	}
\end{minipage}%
}

\newcommand{\ccfooter}{%
	\vspace{0.7cm}%
	\singlespacing%
	\begin{tikzpicture}[remember picture, overlay]
		\node[anchor=south west, xshift=1.2cm, yshift=3.3cm] at (current page.south west)
		{\includegraphics[height=0.8cm]{figuras/cc.png}};
	\end{tikzpicture}%
}


%%%% traduzir caption de figuras e tabelas %%%%%%%%%%%%%%%%%

\addto\captionsbrazilian{
% \renewcommand{\figurename}{Figura}
 \renewcommand{\tablename}{Tabela}
 \renewcommand{\refname}{REFERÊNCIAS}
}

\addto\captionsenglish{
 \renewcommand{\refname}{REFERENCES}
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% % % Citação direta 
\newenvironment{citacaodireta}{%
  \begin{list}{}{%
    \small
    \setlength{\leftmargin}{4cm}
    \singlespacing
  }
  \item\relax
}{\end{list}}

% \begin{document}
%   \lipsum[1]
% 
%   \begin{novoambiente}
%     \lipsum[2]
%   \end{novoambiente}
% 
%   \lipsum[3]
% \end{document}
% --- Titulo de secao ---

\newcommand{\secao}[1]{\section{#1}}
\renewcommand{\section}{\@startsection
{section} %Nome
{0} %Nivel
{0mm} %Indentacao
{1.5\baselineskip} % Antes do paragrafo
{1.5\baselineskip} % Depois do paragrafo
{\noindent\bfseries\uppercase}} % Estilo - negrito e maiusculo

% Titulo de subsecao ---

\newcommand{\subsecao}[1]{\subsection{#1}}
\renewcommand{\subsection}{\@startsection
{subsection} %Nome
{1} %Nivel
{0mm} %Indentacao
{1.5\baselineskip} % Antes do paragrafo
{1.5\baselineskip} % Depois do paragrafo
{\noindent\bfseries}} % Estilo

% Titulo de subsubsecao ---

\newcommand{\subsubsecao}[1]{\subsubsection{#1}}
\renewcommand{\subsubsection}{\@startsection
{subsubsection}% %Nome
{2} %Nivel
{0mm} %Indentacao
{1.5\baselineskip} % Antes do paragrafo
{1.5\baselineskip} % Depois do paragrafo
{\noindent\bfseries\itshape}} % Estilo

%%%%%%%%%%%Título de Seção de 4° nível %%%%%%%%%%%%%%%%
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{3}
\newcounter {subsubsubsection}[subsubsection]
\renewcommand\thesubsubsubsection{\thesubsubsection .\@arabic\c@subsubsubsection}
\newcommand\subsubsubsection{\@startsection{subsubsubsection}{4}{\z@}%
				     {1.5\baselineskip} % Antes do paragrafo
                                     {0.0\baselineskip}
                                     {\normalsize\bfseries\underbar}}
\newcommand*{\subsubsubsectionmark}[1]{\\ \par}

%%%%%%%%%%%Título de Seção de 5° nível %%%%%%%%%%%%%%%%

\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{4}
\newcounter {subsubsubsubsection}[subsubsubsection]
\renewcommand\thesubsubsubsubsection{\thesubsubsubsection .\@arabic\c@subsubsubsubsection}
\newcommand\subsubsubsubsection{\@startsection{subsubsubsubsection}{5}{\z@}%
				     {1.5\baselineskip} % Antes do paragrafo
                                     {0.0\baselineskip}
                                     {\normalsize}}
% \newcommand*\l@subsubsubsection{\@dottedtocline{3}{10.0em}{4.1em}}
\newcommand*{\subsubsubsubsectionmark}[1]{\\ \par}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Comando para citação individual de Autor e Ano
\newcommand{\citeAutorAno}[1]{\citeauthoronline{#1} (\citeyear{#1})}
\newcommand{\citeCitacao}[1]{\textsc{\citeauthoronline{#1}}, \citeyear{#1}} % para dentro do parentese ficar maisculo
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Recuo da primeira linha de cada parágrafo
%  \onehalfspace  % espaçamento 1.5 entre linhas
%  \setlength{\parindent}{1.25cm}

\usepackage{indentfirst}

%Desenhar figuras geometricas
\usepackage{tikz}

%  Formata tipo e tamanho da fonte das subseções.

\fancyhf{}

%para margem do cabeçalho ficar do tamanho da margem do texto
\fancyheadoffset{0cm}
 
\lhead{\footnotesize{\monog}} 

\setlength\parindent{0pt}

%\renewcommand{\footrulewidth}{0.5pt}
%\rfoot [\footnotesize{\editorial}]{\thepage}
%\lfoot [\thepage]{\footnotesize{\editorial}}

\renewcommand{\footrulewidth}{0pt} % Remove linha do rodapé
%\fancyhf{} % Limpa cabeçalhos e rodapés

\fancyfoot[C]{%
	\noindent
	\begin{tcolorbox}[
		colback=headerblue,
		colframe=headerblue,
		boxrule=0pt,
		arc=0pt,
		left=15pt,
		right=15pt,
		outer arc=0pt,
		width=\paperwidth,
		height=1.0cm,
		valign=center,  % centraliza verticalmente
		%halign=center,  % centraliza horizontalmente
		enlarge left by=-43pt,
		%enlarge right by=-\oddsidemargin,
		enlarge top by=-13pt,
		%enlarge bottom by=0pt
		]
		\noindent
		\begin{minipage}[t]{0.8\textwidth}
			\hspace{0.9cm}%
			\textcolor{white}{\footnotesize{\editorial}}
		\end{minipage}%
		\begin{minipage}[t]{0.15\textwidth}
			\raggedleft
			\textcolor{white}{\thepage}
		\end{minipage}
		
		%\footnotesize{\editorial}]{\thepage}
		%\lfoot [\thepage]{\footnotesize{\editorial}
	\end{tcolorbox}
}